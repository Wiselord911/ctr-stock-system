{% extends "base.html" %}
{% block content %}
<div class="py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h2 class="mb-0">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</h2>
    <div class="text-muted small">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö{{ ' ' + current_user.email if current_user else '' }}</div>
  </div>

  <!-- Summary cards -->
  <div class="row g-3 mb-4">
    <div class="col-sm-6 col-lg-3">
      <div class="card p-3 text-center">
        <div class="text-muted">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>
        <div class="h3 mb-0">{{ total_items or 0 }}</div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-3">
      <div class="card p-3 text-center">
        <div class="text-muted">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>
        <div class="h3 mb-0">{{ total_categories or 0 }}</div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-3">
      <div class="card p-3 text-center">
        <div class="text-muted">‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
        <div class="h3 text-success mb-0">{{ total_receive or 0 }}</div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-3">
      <div class="card p-3 text-center">
        <div class="text-muted">‡πÄ‡∏ö‡∏¥‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
        <div class="h3 text-danger mb-0">{{ total_issue or 0 }}</div>
      </div>
    </div>
  </div>

  <!-- Quick actions -->
  <div class="mb-3 d-flex flex-wrap gap-2">
    <a href="{{ url_for('items') }}" class="btn btn-outline-light">üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
    <a href="{{ url_for('receive') }}" class="btn btn-outline-success">‚¨ÜÔ∏è ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤</a>
    <a href="{{ url_for('issue') }}" class="btn btn-outline-danger">‚¨áÔ∏è ‡πÄ‡∏ö‡∏¥‡∏Å‡∏≠‡∏≠‡∏Å</a>
    <a href="{{ url_for('categories') }}" class="btn btn-outline-light">üóÇÔ∏è ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</a>
    <a href="{{ url_for('reports') }}" class="btn btn-outline-info">üìë ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</a>
  </div>

  <!-- Latest logs -->
  <div class="card p-3">
    <h5 class="mb-3">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h5>
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead>
          <tr>
            <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
            <th class="text-end">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß</th>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
          </tr>
        </thead>
        <tbody>
          {% if latest_logs and latest_logs|length %}
            {% for row in latest_logs %}
              <tr>
                <td>{{ row.item_name or '-' }}</td>
                <td>{{ row.category_name or '-' }}</td>
                <td class="text-end">{{ row.quantity or 0 }}</td>
                <td>
                  {% if row.type == 'receive' %}
                    <span class="badge bg-success">‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤</span>
                  {% elif row.type == 'issue' %}
                    <span class="badge bg-danger">‡πÄ‡∏ö‡∏¥‡∏Å‡∏≠‡∏≠‡∏Å</span>
                  {% else %}
                    <span class="badge bg-secondary">{{ row.type or '-' }}</span>
                  {% endif %}
                </td>
                <td>
                  {% if row.date %}{{ row.date.strftime('%d/%m/%Y %H:%M') }}{% else %}-{% endif %}
                </td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="5" class="text-center text-muted py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß</td>
            </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
